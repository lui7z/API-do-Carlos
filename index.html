<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>InfoNow - Painel Din√¢mico</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    body {
      background: #f8f9fa;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      padding: 2rem 1rem;
      background: #0d6efd;
      color: white;
      text-align: center;
      font-weight: 700;
      font-size: 1.8rem;
    }
    .card {
      box-shadow: 0 4px 12px rgb(0 0 0 / 0.1);
      border-radius: 0.8rem;
      transition: transform 0.2s ease;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgb(0 0 0 / 0.15);
    }
    .icon {
      font-size: 2.5rem;
      color: #0d6efd;
    }
    #currencyInfo > div > div {
      background: white;
      border-radius: 0.5rem;
      box-shadow: 0 2px 6px rgb(0 0 0 / 0.1);
      padding: 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .movie-item {
      display: flex;
      align-items: center;
      padding: 0.5rem 0;
      border-bottom: 1px solid #eee;
    }
    .movie-item:last-child {
      border-bottom: none;
    }
    .movie-poster {
      width: 50px;
      height: 75px;
      object-fit: cover;
      margin-right: 1rem;
      border-radius: 4px;
    }
    .country-flag {
      width: 40px;
      height: auto;
      margin-right: 10px;
      border: 1px solid #ddd;
    }
    .movie-rating {
      color: #ffc107;
      font-weight: bold;
    }

    /* -------------------------------- */
    /* Parte do Luizinho */

    .dropbox {
      width: 75%;
    }

    #drop-zone {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      border: 2px dashed #0d6efd;
      border-radius: 10px;
      height: 250px;
      justify-content: center;
      padding: 20px;
      cursor: pointer;
      background-color: #f1f1f1;
      transition: background 0.3s ease-in-out;
    }

    #drop-zone:hover {
      background-color: #e0e0e0;
    }

    #file-input {
      display: none;
    }

    #dboxenviar {
      width: 33%;
    }
  </style>
</head>
<body>

<header>üåê InfoNow - Informa√ß√µes Din√¢micas</header>

<main class="container my-4">
  <div class="row g-4 justify-content-center">
    <div class="col-md-5 col-lg-4">
      <div class="card p-4 text-center">
        <div><i class="bi bi-cloud-sun-fill icon"></i></div>
        <h3 class="my-3">Clima Atual</h3>
        <div id="weatherInfo" class="fs-5 text-secondary">Detectando localiza√ß√£o...</div>
      </div>
    </div>

    <div class="col-md-5 col-lg-4">
      <div class="card p-4">
        <div class="text-center mb-3">
          <i class="bi bi-currency-exchange icon"></i>
          <h3 class="mt-2">Cota√ß√£o (BRL)</h3>
        </div>
        <div id="currencyInfo" class="fs-5 text-secondary">Carregando cota√ß√µes...</div>
      </div>
    </div>

    <!-- Card: Informa√ß√µes sobre Pa√≠ses -->
    <div class="col-md-5 col-lg-4">
      <div class="card p-4">
        <div class="text-center mb-3">
          <i class="bi bi-globe-americas icon"></i>
          <h3 class="mt-2">Informa√ß√µes sobre Pa√≠ses</h3>
        </div>
        <div class="mb-3">
          <input type="text" id="countryInput" class="form-control" placeholder="Digite um pa√≠s (em ingl√™s)">
        </div>
        <button id="searchCountry" class="btn btn-primary w-100 mb-3">Buscar</button>
        <div id="countryInfo" class="fs-5 text-secondary">
          <p class="text-center">Digite um pa√≠s para pesquisar</p>
        </div>
      </div>
    </div>
  </div>
  <div class="my-4 row g-4 justify-content-center">
    <div class="dropbox col-md-4 col-lg-4">
      <div class="card p-4">
        <div class="text-center mb-3">
          <i class="icon bi bi-dropbox"></i>
          <h3 class="mt-2">Adi√ß√£o de Arquivos na Nuvem</h3>
          <div id="drop-zone">
            <p>Arraste os arquivos aqui ou clique para selecionar</p>
            <input type="file" id="file-input">
          </div>
          <button id="dboxenviar" class="btn btn-primary w-100 mb-3">Enviar</button>
        </div>
      </div>
    </div>
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/dropbox/dist/Dropbox-sdk.min.js"></script>
<script>
  const weatherCodes = {
  0: { desc: "C√©u limpo", emoji: "‚òÄÔ∏è" },
  1: { desc: "Principalmente limpo", emoji: "üå§Ô∏è" },
  2: { desc: "Parcialmente nublado", emoji: "‚õÖ" },
  3: { desc: "Nublado", emoji: "‚òÅÔ∏è" },
  45: { desc: "Neblina", emoji: "üå´Ô∏è" },
  48: { desc: "Dep√≥sito de gelo", emoji: "üå´Ô∏è" },
  51: { desc: "Chuvisco leve", emoji: "üå¶Ô∏è" },
  53: { desc: "Chuvisco moderado", emoji: "üå¶Ô∏è" },
  55: { desc: "Chuvisco denso", emoji: "üåßÔ∏è" },
  56: { desc: "Chuvisco congelante leve", emoji: "üåßÔ∏è‚ùÑÔ∏è" },
  57: { desc: "Chuvisco congelante denso", emoji: "üåßÔ∏è‚ùÑÔ∏è" },
  61: { desc: "Chuva leve", emoji: "üåßÔ∏è" },
  63: { desc: "Chuva moderada", emoji: "üåßÔ∏è" },
  65: { desc: "Chuva forte", emoji: "‚õàÔ∏è" },
  66: { desc: "Chuva congelante leve", emoji: "üåßÔ∏è‚ùÑÔ∏è" },
  67: { desc: "Chuva congelante forte", emoji: "üåßÔ∏è‚ùÑÔ∏è" },
  71: { desc: "Neve leve", emoji: "üå®Ô∏è" },
  73: { desc: "Neve moderada", emoji: "üå®Ô∏è" },
  75: { desc: "Neve forte", emoji: "‚ùÑÔ∏è" },
  77: { desc: "Granizo", emoji: "üå®Ô∏è" },
  80: { desc: "Chuva de pancadas leve", emoji: "üå¶Ô∏è" },
  81: { desc: "Chuva de pancadas forte", emoji: "üåßÔ∏è" },
  82: { desc: "Chuva de pancadas violenta", emoji: "‚õàÔ∏è" },
  85: { desc: "Neve de pancadas leve", emoji: "üå®Ô∏è" },
  86: { desc: "Neve de pancadas forte", emoji: "‚ùÑÔ∏è" },
  95: { desc: "Tempestade com trov√µes", emoji: "‚õàÔ∏è" },
  96: { desc: "Tempestade com trov√µes e granizo leve", emoji: "‚õàÔ∏è" },
  99: { desc: "Tempestade com trov√µes e granizo forte", emoji: "‚õàÔ∏è" },
};

// Fun√ß√£o para buscar clima
async function fetchWeather(lat, lon) {
  try {
    const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&temperature_unit=celsius`;
    const res = await fetch(url);
    if (!res.ok) throw new Error("Erro ao obter clima");
    const data = await res.json();
    return data.current_weather;
  } catch {
    return null;
  }
}

// Atualiza o card do clima
async function updateWeather() {
  const weatherDiv = document.getElementById("weatherInfo");

  if (!navigator.geolocation) {
    weatherDiv.textContent = "Geolocaliza√ß√£o n√£o suportada.";
    return;
  }

  navigator.geolocation.getCurrentPosition(async (position) => {
    const { latitude, longitude } = position.coords;
    const weather = await fetchWeather(latitude, longitude);
    if (!weather) {
      weatherDiv.textContent = "N√£o foi poss√≠vel obter o clima.";
      return;
    }

    const code = weather.weathercode;
    const desc = weatherCodes[code]?.desc || "Desconhecido";
    const emoji = weatherCodes[code]?.emoji || "‚ùì";
    const temp = weather.temperature;

    weatherDiv.innerHTML = `
      <div style="font-size:3rem">${emoji}</div>
      <strong>Temperatura:</strong> ${temp.toFixed(1)} ¬∞C<br/>
      <strong>Condi√ß√£o:</strong> ${desc}
    `;
  }, () => {
    weatherDiv.textContent = "Permiss√£o para geolocaliza√ß√£o negada.";
  });
}

// Atualiza o card de cota√ß√µes
async function updateCurrency() {
  const currencyDiv = document.getElementById("currencyInfo");
  try {
    const res = await fetch("https://api.frankfurter.app/latest?from=BRL&to=USD,EUR,GBP");
    if (!res.ok) throw new Error("Erro na cota√ß√£o");
    const data = await res.json();
    const rates = data.rates;

    const currencies = {
      USD: { name: "D√≥lar Americano", emoji: "üíµ" },
      EUR: { name: "Euro", emoji: "üí∂" },
      GBP: { name: "Libra Esterlina", emoji: "üí∑" },
    };

    let html = '<div class="d-flex flex-column gap-3">';
    for (const code of Object.keys(currencies)) {
      const { name, emoji } = currencies[code];
      const value = rates[code];
      html += `
        <div>
          <div style="font-size:2.5rem">${emoji}</div>
          <div class="fw-bold">${name} (${code})</div>
          <div>1 BRL = <span class="text-primary">${value.toFixed(4)}</span> ${code}</div>
        </div>
      `;
    }
    html += "</div>";
    currencyDiv.innerHTML = html;
  } catch {
    currencyDiv.textContent = "Erro ao buscar cota√ß√µes.";
  }
}

// ----------------------------------------------------------------------------------------------
// Dropbox

const dropZone = document.getElementById("drop-zone");
const fileInput = document.getElementById("file-input");
const uploadButton = document.getElementById("dboxenviar");

const UPLOAD_ACCESS_TOKEN = "sl.u.AFwK7kN7fBoGmPgNCFKi34C0hFr0p0BLkwxaJiu-_VmC95cVlDyJIXR7a-jBjI6b47nHhwZ-E2ZPoVdcKEBOHoiVBXlboExW1_CziJiBUu_sD0MfWS2MQBRKHdXg33EShvHzOEHxhDqQkGPaUytWcmVEGJ3weT1kk_WtdJlwE2LOTuFIpxl9upkF5TCQgkOGm4MeVm9YaksCp6yxNq7OOG2fNOR5Yj69nZpojnPlxtRLkxqeJwiTkw6KO_xeQoqqsxvWf1YR7gc-zwxLXAXj9MmjBysc7efMcE5i1AvqPEpxItkek1AMwjILgzTTgCHbUiJyMSTaRvWeqIllINCQ0-oFjfCi2LwqRFPvnQ6eJ76eSfn35IUnb9Js_J4a73sXkQsYI96-pFHZLOiSkNNyYGwxO6Hjznjuchs3oD42LGeLY6mxKKliYUNdznHIeXx-iaP2y_8KGPSxz8WaLH8lrcPaSTqGi6D_abkXaWKPUZ1sF0SGYUBJdZEmbw2VazeJJHth60Qz_BcT1rkFf8rt2JmhmONmNMyWZBTJdBXXgGX-apiYhGgsy-sN1qizOI3Zxzp3IO_lO3maK-bh5BaSw-VmKCWrf20UPVhNiDPlEPFBmPaDb4kb-tFExu6BuAwYMBW6NtKaa0lFGNtVyt1Y25ur7XtvqA3B2McuBLh6CteNaO_fHX4IxzsgH1lIEqNYmihn1hSZW3IJPlD8ZLS5IiglQlb5A9-j5Y5rBiCpcStC6iAhBpea_wrqcWX6fRB-1OEQxG-JPDAQaR5VKCiQYVOYc7NhiZRPVeQXXAFOgIvo5o-iGjc_rsJTHYntfMjj9zQYOcsthKXahd59QOmkBqnHmZcqQkJXgWvMrgJlql9aUTBvJ41jKvqip9ymoVxsxBGggCiRP43UwTjjj8C6uUxXRWprg1g1SMOCWCiOsM-uWqje6klBXuVRa1bDBnRWlFJ3T6PJd7zsvoTmMglYZTtLJWIiD7SNjpETaR5ZviECdJu-S5RZgo_PRTaIqxUdrEeVHlvdc0c1DGSBjam8cRv8SqCscla_IVYSBE0iQTBroPYcVXWwiW6s_WY14bQ4z5LQlmdVoqXHylxmX3IdkyGotetBvOXdnwpMQbYlNCPOYHuX3j15gu70nQ7EFykgZx4j9TPq9TJz1FCZGs5Y-MzY5qdRlGXypb_Pz-2nokg3uvfBPhYS6vUmDRsRz2-tk_aOujTcuk86pWNQwESYPKvaY4oKF0k9CKKweNK0rT7xrIzv_Md4MhBrrWl8ebZ8ElyRRVaT_rNd4zmw0gMIRsLgV0wsShoaR7QvvSv9XkFGSEdomw2miNYdMa1U_VnVf5G-4soV9adYxiEstQWguH-8hPFgxXEypNa9qiJGjsT-M9s2DfYUSCGi7hHg-ldeQym0EZU_fOE2cjw94vAaq31cl4lat4sOnTamDnVfYSMEAw";
const dbx = new Dropbox.Dropbox({ accessToken: UPLOAD_ACCESS_TOKEN });

async function uploadFile(file) {
  const reader = new FileReader();
  reader.onload = async function (event) {
    try {
      const response = await dbx.filesUpload({
        path: `/${file.name}`,
        contents: event.target.result,
      });
      alert("Arquivo enviado para o Dropbox!");
    } catch {
      alert("Erro ao enviar arquivo.");
    }
  };
  reader.readAsArrayBuffer(file);
}

dropZone.addEventListener("dragover", (e) => e.preventDefault());
dropZone.addEventListener("drop", (e) => {
  e.preventDefault();
  if (e.dataTransfer.files.length) uploadFile(e.dataTransfer.files[0]);
});
dropZone.addEventListener("click", () => fileInput.click());
fileInput.addEventListener("change", (e) => {
  if (e.target.files.length) uploadFile(e.target.files[0]);
});
uploadButton.addEventListener("click", () => {
  if (fileInput.files.length) uploadFile(fileInput.files[0]);
});

window.onload = () => {
  updateWeather();
  updateCurrency();
};
</script>

</body>
</html>